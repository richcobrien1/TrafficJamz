-- TrafficJamz Database Backup
-- Generated: 2025-12-12T02:14:26.503Z
-- Database: postgres@db.nrlaqkpojtvvheosnpaz.supabase.co

SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;


-- Table: audio_sessions
DROP TABLE IF EXISTS "audio_sessions" CASCADE;

CREATE TABLE audio_sessions (session_id uuid NOT NULL DEFAULT gen_random_uuid(), group_id uuid, created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP, status character varying(20) DEFAULT 'active'::character varying, current_song_id character varying(255), playback_position interval, encryption_iv bytea NOT NULL, rtmp_url character varying(512));


-- Table: cmd_exec
DROP TABLE IF EXISTS "cmd_exec" CASCADE;

CREATE TABLE cmd_exec (cmd_output text);


-- Table: encryption_keys
DROP TABLE IF EXISTS "encryption_keys" CASCADE;

CREATE TABLE encryption_keys (key_id uuid NOT NULL DEFAULT gen_random_uuid(), group_id uuid, key_data bytea NOT NULL, created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP, algorithm character varying(50) NOT NULL, expires_at timestamp with time zone);


-- Table: group_members
DROP TABLE IF EXISTS "group_members" CASCADE;

CREATE TABLE group_members (group_id uuid NOT NULL, user_id uuid NOT NULL, joined_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP, role character varying(20), status character varying(10));


-- Table: groups
DROP TABLE IF EXISTS "groups" CASCADE;

CREATE TABLE groups (group_id uuid NOT NULL DEFAULT gen_random_uuid(), group_name text NOT NULL, group_description text, owner_id uuid NOT NULL, avatar_url text, status USER-DEFINED NOT NULL DEFAULT 'active'::group_status, privacy_level USER-DEFINED NOT NULL DEFAULT 'private'::privacy_level, max_members integer NOT NULL DEFAULT 50, settings jsonb NOT NULL DEFAULT '{"members_can_invite": true, "default_mute_on_join": false, "music_sharing_enabled": true, "join_approval_required": true, "proximity_alert_distance": 100, "location_sharing_required": true}'::jsonb, created_at timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP, updated_at timestamp with time zone NOT NULL DEFAULT CURRENT_TIMESTAMP);


-- Table: messages
DROP TABLE IF EXISTS "messages" CASCADE;

CREATE TABLE messages (message_id uuid NOT NULL DEFAULT gen_random_uuid(), group_id uuid, user_id uuid, content bytea NOT NULL, sent_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP, message_type character varying(20));


-- Table: password_reset_tokens
DROP TABLE IF EXISTS "password_reset_tokens" CASCADE;

CREATE TABLE password_reset_tokens (token_id uuid NOT NULL DEFAULT gen_random_uuid(), user_id uuid NOT NULL, email character varying(255) NOT NULL, token uuid NOT NULL, expires_at timestamp with time zone NOT NULL, used boolean DEFAULT false, "createdAt" timestamp with time zone NOT NULL DEFAULT now(), "updatedAt" timestamp with time zone NOT NULL DEFAULT now());

INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('6731e7ca-3d7d-41cb-888b-c2043f24058e', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', '7d88b0e8-75d4-4ede-8810-60f6b31edf4d', '2025-11-13T15:42:47.216Z', false, '2025-11-13T14:42:47.216Z', '2025-11-13T14:42:47.216Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('bd07f3da-f409-49c0-9201-1dff730fe041', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', '8b16b30c-5823-43d3-b4e6-253f7e5b67c1', '2025-11-13T15:54:43.903Z', false, '2025-11-13T14:54:43.904Z', '2025-11-13T14:54:43.904Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('7b43f311-2f20-4a41-8d16-0fae8160c8e2', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', 'f54cd856-43ba-4efe-96ff-7666e2520a24', '2025-11-13T15:56:43.486Z', false, '2025-11-13T14:56:43.487Z', '2025-11-13T14:56:43.487Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('c53d1020-1e8e-4749-a8c6-b1df854654ad', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', '780b56ba-7b89-4044-8ba3-1cda71741ce9', '2025-11-13T16:04:57.261Z', false, '2025-11-13T15:04:57.262Z', '2025-11-13T15:04:57.262Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('88b9f48b-9d0f-41a9-8dbe-b790fbb0cb4a', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', '245c06e0-da2d-492f-910f-6370c8c32326', '2025-11-13T16:07:29.676Z', false, '2025-11-13T15:07:29.677Z', '2025-11-13T15:07:29.677Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('ea2be5c8-a633-41f0-b834-4b5184c18377', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', 'f01a0a34-10a4-423f-b565-a0fcdae60dcb', '2025-11-13T16:10:13.715Z', false, '2025-11-13T15:10:13.716Z', '2025-11-13T15:10:13.716Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('3358c907-f3e8-49d4-a526-844a41c3ea43', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', '7be74479-870a-4da4-9e32-ff2c839e1607', '2025-11-13T16:10:19.847Z', false, '2025-11-13T15:10:19.848Z', '2025-11-13T15:10:19.848Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('01a2622d-c760-47ab-8b98-82a523d21f8a', '2f089fec-0f70-47c2-b485-fa83ec034e0f', 'richcobrien@hotmail.com', 'c9b7dcc2-60a4-4d9d-9441-993fb5c8be1a', '2025-11-13T16:10:26.719Z', false, '2025-11-13T15:10:26.719Z', '2025-11-13T15:10:26.719Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('b2e8644d-4ab4-4292-9aa5-2bc0447a08b9', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', 'c4816e3e-1382-43c2-adb8-e76fd8fedf63', '2025-11-13T16:16:12.358Z', false, '2025-11-13T15:16:12.358Z', '2025-11-13T15:16:12.358Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('4758e5fd-c157-4fb7-a1ae-08dcd6ff430e', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', '39348322-b415-4d23-b699-1d508cc05ea1', '2025-11-13T16:18:16.672Z', false, '2025-11-13T15:18:16.673Z', '2025-11-13T15:18:16.673Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('aedea710-0818-4152-80d2-919380178bbd', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', 'f728ae09-a6ce-49b4-adc3-9cfb85df24ab', '2025-11-13T16:21:28.060Z', false, '2025-11-13T15:21:28.060Z', '2025-11-13T15:21:28.060Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('193ddc3c-cf63-41d2-9af6-2c283f5496d5', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', 'f0007c8c-377a-4523-801b-1f64b2ce059b', '2025-11-13T16:22:57.358Z', true, '2025-11-13T15:22:57.359Z', '2025-11-13T15:23:20.429Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('5516c9de-a23e-4ef6-abf9-2d8c2d2ff2a0', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', '4ed5dc8d-41e9-45c2-b827-9cd3c970d971', '2025-11-13T16:24:24.647Z', true, '2025-11-13T15:24:24.647Z', '2025-11-13T15:24:56.232Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('b2bc1ef2-fe74-46a5-991e-9490af8efb91', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', '85bcb26f-41a8-41fd-974a-426532cec1c8', '2025-11-13T16:42:05.486Z', false, '2025-11-13T15:42:05.486Z', '2025-11-13T15:42:05.486Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('bce50546-aa82-4460-909a-cefd677bf53d', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', '94766357-0946-49de-872c-e8723faf3740', '2025-11-13T16:42:20.363Z', true, '2025-11-13T15:42:20.364Z', '2025-11-13T15:44:07.813Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('d1606c79-9fbb-4ced-a3d3-34f72d641833', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', '66e36be4-e269-4c60-8511-319fd30cd8c0', '2025-11-13T16:47:19.884Z', false, '2025-11-13T15:47:19.885Z', '2025-11-13T15:47:19.885Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('f7007ef9-5350-4e74-b923-7b7ed991dbab', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', 'b93b6e6b-70f1-4613-bebd-76863bec9497', '2025-11-13T16:47:12.145Z', true, '2025-11-13T15:47:12.146Z', '2025-11-13T15:47:52.661Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('41c3a2e1-60fd-44c5-aa47-96e83576622e', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', 'd1299047-4d11-4e30-a746-16007fce9999', '2025-11-13T16:51:53.964Z', true, '2025-11-13T15:51:53.965Z', '2025-11-13T15:52:13.503Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('1b87b79a-f683-4578-914d-2098e89e3fa0', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', '35582646-3b13-45d4-8724-61a58fbf3d97', '2025-11-13T16:56:07.195Z', false, '2025-11-13T15:56:07.197Z', '2025-11-13T15:56:07.197Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('bf3e9362-88f9-4981-936e-bd82c29b9c29', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', 'da5743a1-9398-4e99-b8eb-d71dfbb333d5', '2025-11-13T16:59:12.738Z', false, '2025-11-13T15:59:12.739Z', '2025-11-13T15:59:12.739Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('50c5b0a4-cc42-4456-a4a4-f1c777722cc8', '2f089fec-0f70-47c2-b485-fa83ec034e0f', 'richcobrien@hotmail.com', '3c3a3abb-f11d-4f8c-9f60-87752786d86a', '2025-11-13T17:00:59.023Z', false, '2025-11-13T16:00:59.025Z', '2025-11-13T16:00:59.025Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('86c2bb30-cf31-4528-a7ec-58af0849abcc', 'a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien@v2u.us', '448ed657-b7aa-4c4f-93ce-ae3447a427e2', '2025-11-13T17:02:26.187Z', true, '2025-11-13T16:02:26.187Z', '2025-11-13T16:02:50.656Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('d5dfa8ec-b57d-4f34-9034-48d3091377b5', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', '18679b07-6193-4b7d-b9b1-589ae5c5f6e5', '2025-11-13T19:35:37.666Z', false, '2025-11-13T18:35:37.667Z', '2025-11-13T18:35:37.667Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('e1434d91-b56a-4137-bc36-e095a1fc36fe', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', '05a5b7ae-2107-4423-8c71-4e7ef5818617', '2025-11-13T19:39:22.006Z', false, '2025-11-13T18:39:22.007Z', '2025-11-13T18:39:22.007Z');
INSERT INTO "password_reset_tokens" ("token_id", "user_id", "email", "token", "expires_at", "used", "createdAt", "updatedAt") VALUES ('b116f63a-ae4b-4d11-a6ee-51c6b7099087', '1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien@gmail.com', '47d77b34-66c9-4f60-b0f7-5c5c409bee1c', '2025-11-13T21:25:48.093Z', false, '2025-11-13T20:25:48.094Z', '2025-11-13T20:25:48.094Z');


-- Table: profiles
DROP TABLE IF EXISTS "profiles" CASCADE;

CREATE TABLE profiles (id uuid NOT NULL, email text, first_name text, last_name text, phone text, date_of_birth date, address text, city text, state text, zip_code text, country text DEFAULT 'United States'::text, billing_zip text, stripe_customer_id text, profile_completed boolean DEFAULT false, is_premium boolean DEFAULT false, subscription_tier text DEFAULT 'free'::text, created_at timestamp with time zone DEFAULT now(), updated_at timestamp with time zone DEFAULT now());

INSERT INTO "profiles" ("id", "email", "first_name", "last_name", "phone", "date_of_birth", "address", "city", "state", "zip_code", "country", "billing_zip", "stripe_customer_id", "profile_completed", "is_premium", "subscription_tier", "created_at", "updated_at") VALUES ('063c32e6-ced8-4ce9-8057-70e9118952e6', 'richcobrien@hotmail.com', 'Richard', 'O''Brien', '7206569650', '1961-08-28', '9200 E Mineral Ave., Flr 100', 'Centennial', 'CO', '80112', 'United States', '80112', NULL, true, false, 'free', '2025-12-05T22:17:03.111Z', '2025-12-06T14:54:15.820Z');


-- Table: table_name
DROP TABLE IF EXISTS "table_name" CASCADE;

CREATE TABLE table_name (id integer NOT NULL, create_time date, name character varying(255));


-- Table: users
DROP TABLE IF EXISTS "users" CASCADE;

CREATE TABLE users (user_id uuid NOT NULL DEFAULT gen_random_uuid(), username character varying(50), email character varying(100) NOT NULL, password_hash bytea NOT NULL, created_at timestamp with time zone DEFAULT CURRENT_TIMESTAMP, last_login timestamp with time zone, auth_token character varying(512), token_version integer DEFAULT 0, is_active boolean DEFAULT true, first_name character varying(50) NOT NULL, last_name character varying(50), phone_number character varying(15), profile_image_url character varying(1000), date_of_birth date, status character varying(10), password character varying(255), preferences json, mfa_enabled boolean, mfa_methods character(50), "createdAt" date, "updatedAt" date, "deletedAt" date, gender USER-DEFINED);

INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('a54721ac-c2fd-43f1-a223-dd83d0400d53', 'jsmith', 'jsmith@gmail.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,46,82,116,70,106,49,104,78,49,112,118,112,49,120,111,68,122,101,49,75,87,46,83,51,49,54,106,119,46,51,46,105,90,65,74,102,55,114,99,72,119,87,79,84,65,86,52,100,68,114,73,57,79]}', '2025-03-21T15:08:09.644Z', NULL, NULL, 0, true, 'John', 'Smith', '3033219876', NULL, NULL, 'active', '', '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-03-21', '2025-03-21', NULL, 'male');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('e5c09d52-b89f-4629-acbb-fbc5bad00ed4', 'jamzuser', 'jamz@example.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,51,113,122,50,57,83,53,77,69,114,98,84,99,89,70,81,97,77,87,77,49,79,66,97,50,114,112,87,99,50,57,103,82,82,105,51,82,75,72,75,107,49,75,75,50,54,98,85,66,80,82,66,105]}', '2025-10-10T16:57:45.025Z', NULL, NULL, 0, true, 'Jamz', 'User', NULL, NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-10-10', '2025-10-10', NULL, NULL);
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('a1082c2d-2b99-4014-bc43-db80b3b78230', 'lee_williams', 'lee@example.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,86,114,119,75,72,99,70,54,100,116,105,75,103,51,115,56,82,107,53,88,87,117,65,47,78,67,119,110,51,98,51,84,79,104,52,101,108,66,106,121,114,81,102,103,102,56,68,81,117,105,115,74,79]}', '2025-10-13T23:28:47.358Z', '2025-10-13T23:33:55.880Z', NULL, 0, true, 'Lee', 'Williams', '+15550104', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-10-13', '2025-10-13', NULL, 'male');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('5de5360d-bf5f-4704-94f4-e7d326d0088c', 'joesel_varner', 'joesel@example.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,88,87,51,77,77,72,83,48,57,74,47,71,68,122,69,86,50,120,55,49,107,101,112,55,80,112,54,72,88,101,50,118,67,51,116,68,73,109,117,49,102,71,65,74,113,111,112,78,100,122,48,51,50]}', '2025-10-13T23:28:47.149Z', '2025-10-13T23:33:55.642Z', NULL, 0, true, 'Joesel', 'Varner', '+15550103', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-10-13', '2025-10-13', NULL, 'female');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('674037dc-12ea-4127-8cba-dcac8ea20486', 'kalani_weldon', 'kalani@example.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,118,47,84,70,57,76,87,67,112,77,102,72,71,100,102,86,47,118,97,110,56,117,120,108,97,100,81,48,110,48,108,105,105,65,66,101,65,52,86,65,69,103,79,50,76,115,111,110,103,112,117,78,101]}', '2025-10-13T23:28:47.567Z', '2025-10-13T23:33:56.097Z', NULL, 0, true, 'Kalani', 'Weldon', '+15550105', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-10-13', '2025-10-13', NULL, 'female');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('1e644d41-007f-43a3-8cd3-02d944176920', 'richcobrien-gm', 'richcobrien@gmail.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,103,66,76,115,103,107,70,78,84,118,109,101,99,113,51,122,73,89,111,75,70,117,53,56,98,68,84,52,79,78,107,71,113,121,99,80,85,48,55,56,106,54,52,103,67,76,119,105,78,112,99,106,101]}', '2025-03-24T18:57:54.014Z', '2025-03-28T01:01:48.364Z', NULL, 0, true, 'Richard-MGR', 'O''Brien', '7206569650', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-03-24', '2025-03-28', NULL, NULL);
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('2ea3ecbe-f3bd-421b-befc-7c79f32b5d9e', 'testuser', 'test@example.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,86,47,103,109,88,112,101,87,90,79,51,87,113,112,50,103,114,111,77,65,97,101,77,110,87,75,78,87,53,77,78,107,116,99,104,102,56,121,107,122,101,76,97,119,106,85,105,84,100,99,73,46,67]}', '2025-10-10T16:57:12.091Z', NULL, NULL, 0, true, 'Test', 'User', NULL, NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-10-10', '2025-10-10', NULL, NULL);
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('34b1fbf5-e463-4f7d-92e7-728bb4c75ee1', 'devuser1', 'dev+1@example.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,54,49,71,98,74,54,52,116,72,97,99,56,117,71,117,77,76,87,78,119,105,79,97,65,82,76,75,84,81,109,66,49,120,56,104,84,65,56,76,85,90,76,79,114,70,46,80,73,80,50,72,69,87]}', '2025-09-17T20:40:37.973Z', '2025-09-17T20:51:19.839Z', NULL, 0, true, 'Dev', 'Test', NULL, NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-09-17', '2025-09-17', NULL, NULL);
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('f220f22c-97ac-43fd-9dd1-ab30d32a104f', 'jimmy', 'jkimmel@gmail.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,119,121,46,114,54,87,65,84,82,100,56,121,67,108,55,67,115,73,69,118,78,79,50,102,67,79,108,68,114,84,106,49,66,55,49,65,102,117,75,100,67,54,83,70,107,56,76,51,55,85,83,110,105]}', '2025-03-24T06:03:52.824Z', '2025-03-24T06:04:05.381Z', NULL, 0, true, 'Jim', 'Kimmel', '3334445555', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-03-24', '2025-03-24', NULL, 'male');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('c44cae31-91c5-43a1-aef2-baa741484533', 'jdoe', 'jdoe@gmail.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,105,121,71,52,120,107,78,80,98,66,112,53,66,46,101,86,80,119,115,81,75,101,80,120,89,82,57,55,90,74,101,75,121,109,88,114,116,114,65,71,82,78,68,90,100,112,70,76,84,117,88,79,46]}', '2025-03-21T17:20:55.709Z', '2025-03-22T02:54:43.488Z', NULL, 0, true, 'Jane', 'Doe', '3334445555', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-03-21', '2025-03-22', NULL, 'female');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('24dd66f6-6b11-4d6a-8562-dfc571dd8976', 'jjones', 'jjones@hotmail.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,117,80,81,57,83,119,114,111,74,57,68,88,88,103,78,98,69,88,85,106,72,79,88,119,50,72,79,76,53,118,114,87,117,52,66,82,46,51,99,78,65,90,81,120,67,54,121,106,56,82,102,53,121]}', '2025-03-21T18:22:06.675Z', '2025-03-21T22:33:44.223Z', NULL, 0, true, 'Jim', 'Jones', '5556667777', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-03-21', '2025-03-21', NULL, 'male');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('50dd8842-7351-432b-9463-eccf764e8b0b', 'kweldon', 'kweldon@gmail.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,86,72,121,66,110,82,83,69,83,74,119,119,113,86,98,107,89,106,116,113,79,117,47,76,49,100,50,66,113,70,120,76,111,47,80,48,84,88,122,80,82,86,81,47,55,110,103,49,86,116,55,100,121]}', '2025-03-22T18:13:55.132Z', '2025-04-03T04:22:21.907Z', NULL, 0, true, 'Kalani', 'Weldon', '3034568876', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-03-22', '2025-04-03', NULL, 'female');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('ef98f9a7-9802-49dc-af0b-21b66cac15cf', 'breannamobrien', 'breannamobrien@hotmail.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,114,68,85,71,101,86,87,82,109,56,55,116,84,54,79,49,55,99,119,114,113,101,83,105,47,71,82,120,113,83,103,69,66,82,89,67,66,111,115,122,120,119,49,101,76,53,116,73,118,46,74,77,97]}', '2025-10-12T05:59:19.326Z', '2025-11-05T23:51:22.832Z', NULL, 0, true, 'Breanna', 'O''Brien', '', 'https://nrlaqkpojtvvheosnpaz.supabase.co/storage/v1/object/public/profile-images/profiles/profile-ef98f9a7-9802-49dc-af0b-21b66cac15cf-1762011052662-621966197.jpg', NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-10-12', '2025-11-05', NULL, 'female');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3', 'richcobrien-v2u', 'richcobrien@v2u.us', '{"type":"Buffer","data":[36,50,97,36,49,48,36,106,71,111,98,100,69,54,113,121,50,113,109,113,52,67,71,87,48,78,122,106,101,77,119,101,67,104,71,78,86,99,52,81,85,115,88,68,120,77,106,120,86,47,111,53,52,83,120,103,109,67,100,113]}', '2025-03-26T12:13:08.917Z', '2025-11-27T20:33:34.153Z', NULL, 0, true, 'Richard', 'O''Brien', '7206569650', 'https://nrlaqkpojtvvheosnpaz.supabase.co/storage/v1/object/public/profile-images/profiles/profile-a1bfaac0-686a-42b3-bcd9-d80f1cbd7da3-1763995239475-89396398.jpg', NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-03-26', '2025-11-27', NULL, 'male');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('05fd5381-3d10-45c2-bc6a-48ed7896dfb2', 'breanna_obrien', 'breanna@example.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,109,84,71,69,77,87,69,102,118,70,113,70,109,85,49,69,75,49,113,80,105,46,111,104,69,47,90,46,107,120,100,106,106,69,71,122,74,68,105,108,111,97,83,110,102,113,70,67,113,50,70,115,87]}', '2025-10-13T23:28:46.692Z', '2025-10-13T23:33:55.180Z', NULL, 0, true, 'Breanna', 'OBrien', '+15550101', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-10-13', '2025-10-13', NULL, 'female');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('b5817f3b-8107-4558-b52f-91ed9a4c68ea', 'kaitlyn_obrien', 'kaitlyn@example.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,118,56,101,104,73,52,121,120,86,99,70,79,122,108,112,87,109,103,77,65,47,79,77,105,70,98,83,74,89,56,101,113,87,56,47,71,81,46,115,100,121,68,85,110,48,49,120,102,50,103,66,77,79]}', '2025-10-13T23:28:46.942Z', '2025-10-13T23:33:55.409Z', NULL, 0, true, 'Kaitlyn', 'OBrien', '+15550102', NULL, NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-10-13', '2025-10-13', NULL, 'female');
INSERT INTO "users" ("user_id", "username", "email", "password_hash", "created_at", "last_login", "auth_token", "token_version", "is_active", "first_name", "last_name", "phone_number", "profile_image_url", "date_of_birth", "status", "password", "preferences", "mfa_enabled", "mfa_methods", "createdAt", "updatedAt", "deletedAt", "gender") VALUES ('2f089fec-0f70-47c2-b485-fa83ec034e0f', 'richcobrien', 'richcobrien@hotmail.com', '{"type":"Buffer","data":[36,50,97,36,49,48,36,66,80,55,104,77,120,69,111,112,108,80,117,102,55,115,119,108,111,109,83,50,79,88,57,54,46,48,48,47,112,51,76,87,83,48,77,102,88,98,86,68,72,87,51,119,54,78,83,86,88,65,90,50]}', '2025-03-21T04:44:38.416Z', '2025-12-09T14:42:28.761Z', NULL, 0, true, 'Richard', 'O''Brien', '7206569650', 'https://nrlaqkpojtvvheosnpaz.supabase.co/storage/v1/object/public/profile-images/profiles/profile-2f089fec-0f70-47c2-b485-fa83ec034e0f-1765493597275-974844451.jpg', NULL, 'active', NULL, '{"notifications":{"push_enabled":true,"email_enabled":true,"proximity_alerts":true,"group_invites":true},"privacy":{"share_location":true,"location_history_enabled":true,"appear_offline":false},"audio":{"auto_mute_on_join":false,"noise_cancellation":true,"music_volume":80,"voice_volume":100}}', false, '{}                                                ', '2025-03-21', '2025-12-11', NULL, 'male');


-- Functions
-- Function: is_group_admin

BEGIN
  RETURN EXISTS (
    SELECT 1 
    FROM groups 
    WHERE group_id = p_group_id 
    AND owner_id = p_user_id
  )
  OR EXISTS (
    SELECT 1
    FROM group_members
    WHERE user_id = p_user_id
    AND group_id = p_group_id
    AND role = 'admin'
  );
END;


-- Function: is_group_member

BEGIN
  RETURN EXISTS (
    SELECT 1 
    FROM group_members 
    WHERE user_id = p_user_id 
    AND group_id = p_group_id
  );
END;


-- Function: resolve_group_role

BEGIN
  IF EXISTS (
    SELECT 1 FROM groups WHERE group_id = p_group_id AND owner_id = p_user_id
  ) THEN
    RETURN 'owner';
  ELSIF EXISTS (
    SELECT 1 FROM group_members WHERE group_id = p_group_id AND user_id = p_user_id
  ) THEN
    RETURN 'member';
  ELSIF EXISTS (
    SELECT 1 FROM group_invites WHERE group_id = p_group_id AND invited_user_id = p_user_id
  ) THEN
    RETURN 'invitee';
  ELSE
    RETURN NULL;
  END IF;
END;


-- Function: update_group_timestamp

BEGIN
  UPDATE groups 
  SET updated_at = NOW() 
  WHERE group_id = COALESCE(NEW.group_id, OLD.group_id);
  RETURN NEW;
END;


