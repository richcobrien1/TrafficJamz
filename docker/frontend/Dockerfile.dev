# docker/frontend/Dockerfile.dev
# Dockerfile for the frontend development environment
FROM node:18-alpine

# Set working directory
WORKDIR /app

# Install dependencies
COPY frontend/package*.json ./frontend/
WORKDIR /app/frontend
RUN npm install

# Copy source code for live dev
COPY frontend/src ./src
COPY frontend/public ./public
COPY shared ./shared

# Set environment variables
ENV NODE_ENV=development
ENV REACT_APP_API_URL=http://localhost:5000
ENV REACT_APP_WEBRTC_URL=http://localhost:5000

# Optionally copy dev TLS config and entrypoint
COPY docker/frontend/nginx.dev.conf /etc/nginx/nginx.dev.conf
COPY docker/frontend/entrypoint.sh /entrypoint.sh
RUN chmod +x /entrypoint.sh

# Expose frontend dev server port
EXPOSE 8080

# Start frontend dev server with hot reload
CMD ["npm", "start"]
