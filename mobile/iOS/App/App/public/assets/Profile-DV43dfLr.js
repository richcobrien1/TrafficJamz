import{j as e,u as M,r as d,a as R}from"./index-C_3tyMlA.js";import{B as _,T as x,P as C}from"./Box-B7n4D01-.js";import{A as q,T as J,L as i,a as t,D as r}from"./Toolbar-C16-zNA2.js";import{c as S,I as K,L as T,B as D,C as O}from"./List-K2ODHGaJ.js";import{A as Q}from"./ArrowBack-CbxRKbGl.js";import{C as X}from"./Container-BLhiYW-S.js";import{G as a}from"./Grid-CyXsRVxX.js";import{A as h}from"./Avatar-CTdIBAVi.js";import{L as g}from"./ListItemAvatar-mpGPWVKz.js";import{N as Y}from"./Notifications-4kvzrTaZ.js";import{A as G}from"./Grow-5OE428Pa.js";import{T as u}from"./TextField-BEOKNznX.js";import{S as y}from"./Switch-CUqeLwf6.js";import"./mergeSlotProps-COfFLBTA.js";const Z=S(e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"})),$=S(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"})),U=S(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"})),ue=()=>{var k,w,B;const{currentUser:s,updateProfile:H,logout:z}=M(),[P,I]=d.useState(!1),[N,A]=d.useState(""),[L,b]=d.useState(""),[n,E]=d.useState({username:(s==null?void 0:s.username)||"",email:(s==null?void 0:s.email)||"",first_name:(s==null?void 0:s.first_name)||"",last_name:(s==null?void 0:s.last_name)||"",phone_number:(s==null?void 0:s.phone_number)||""}),[p,F]=d.useState({email_notifications:!0,push_notifications:!0,proximity_alerts:!0,group_invitations:!0}),v=R(),c=l=>{const{name:o,value:f}=l.target;E(m=>({...m,[o]:f}))},j=l=>{F(o=>({...o,[l]:!o[l]}))},V=async l=>{var o,f;l.preventDefault();try{I(!0),A(""),b("");const m={first_name:n.first_name,last_name:n.last_name,phone_number:n.phone_number};await H(m),b("Profile updated successfully")}catch(m){A(((f=(o=m.response)==null?void 0:o.data)==null?void 0:f.message)||"Failed to update profile. Please try again.")}finally{I(!1)}},W=()=>{z(),v("/login")};return e.jsxs(_,{sx:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[e.jsx(q,{position:"static",children:e.jsxs(J,{children:[e.jsx(K,{edge:"start",color:"inherit","aria-label":"back",sx:{mr:2},onClick:()=>v("/"),children:e.jsx(Q,{})}),e.jsx(x,{variant:"h6",component:"div",sx:{flexGrow:1},children:"Profile"})]})}),e.jsx(X,{component:"main",sx:{flexGrow:1,py:4},children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,md:4,children:e.jsxs(C,{sx:{p:3,mb:{xs:3,md:0},height:"100%"},children:[e.jsxs(_,{sx:{display:"flex",flexDirection:"column",alignItems:"center",mb:3},children:[e.jsx(h,{src:s==null?void 0:s.profile_image_url,sx:{width:100,height:100,mb:2},children:((k=s==null?void 0:s.first_name)==null?void 0:k[0])||((w=s==null?void 0:s.username)==null?void 0:w[0])}),e.jsxs(x,{variant:"h5",gutterBottom:!0,children:[s==null?void 0:s.first_name," ",s==null?void 0:s.last_name]}),e.jsxs(x,{variant:"body2",color:"text.secondary",children:["@",s==null?void 0:s.username]})]}),e.jsxs(T,{sx:{width:"100%"},children:[e.jsxs(i,{button:!0,onClick:()=>v("/subscription-plans"),children:[e.jsx(g,{children:e.jsx(h,{children:e.jsx(Z,{})})}),e.jsx(t,{primary:"Subscription",secondary:((B=s==null?void 0:s.subscription)==null?void 0:B.plan_name)||"Free Plan"})]}),e.jsx(r,{}),e.jsxs(i,{button:!0,children:[e.jsx(g,{children:e.jsx(h,{children:e.jsx(Y,{})})}),e.jsx(t,{primary:"Notifications",secondary:"Manage notification settings"})]}),e.jsx(r,{}),e.jsxs(i,{button:!0,children:[e.jsx(g,{children:e.jsx(h,{children:e.jsx(U,{})})}),e.jsx(t,{primary:"Security",secondary:"Password and authentication"})]}),e.jsx(r,{}),e.jsxs(i,{button:!0,children:[e.jsx(g,{children:e.jsx(h,{children:e.jsx($,{})})}),e.jsx(t,{primary:"Help & Support",secondary:"Get assistance"})]}),e.jsx(r,{}),e.jsx(i,{button:!0,onClick:W,children:e.jsx(t,{primary:"Logout",primaryTypographyProps:{color:"error"}})})]})]})}),e.jsxs(a,{item:!0,xs:12,md:8,children:[e.jsxs(C,{sx:{p:3,mb:3},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,children:"Personal Information"}),N&&e.jsx(G,{severity:"error",sx:{mb:2},children:N}),L&&e.jsx(G,{severity:"success",sx:{mb:2},children:L}),e.jsxs(_,{component:"form",onSubmit:V,children:[e.jsxs(a,{container:!0,spacing:2,children:[e.jsx(a,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,id:"username",label:"Username",name:"username",value:n.username,onChange:c,disabled:!0,helperText:"Username cannot be changed"})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,id:"email",label:"Email Address",name:"email",value:n.email,onChange:c,disabled:!0,helperText:"Email cannot be changed"})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,id:"first_name",label:"First Name",name:"first_name",value:n.first_name,onChange:c})}),e.jsx(a,{item:!0,xs:12,sm:6,children:e.jsx(u,{fullWidth:!0,id:"last_name",label:"Last Name",name:"last_name",value:n.last_name,onChange:c})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(u,{fullWidth:!0,id:"phone_number",label:"Phone Number",name:"phone_number",value:n.phone_number,onChange:c})})]}),e.jsx(D,{type:"submit",variant:"contained",sx:{mt:3},disabled:P,children:P?e.jsx(O,{size:24}):"Save Changes"})]})]}),e.jsxs(C,{sx:{p:3},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,children:"Notification Settings"}),e.jsxs(T,{children:[e.jsxs(i,{children:[e.jsx(t,{primary:"Email Notifications",secondary:"Receive notifications via email"}),e.jsx(y,{edge:"end",checked:p.email_notifications,onChange:()=>j("email_notifications")})]}),e.jsx(r,{}),e.jsxs(i,{children:[e.jsx(t,{primary:"Push Notifications",secondary:"Receive notifications on your device"}),e.jsx(y,{edge:"end",checked:p.push_notifications,onChange:()=>j("push_notifications")})]}),e.jsx(r,{}),e.jsxs(i,{children:[e.jsx(t,{primary:"Proximity Alerts",secondary:"Get notified when group members are nearby"}),e.jsx(y,{edge:"end",checked:p.proximity_alerts,onChange:()=>j("proximity_alerts")})]}),e.jsx(r,{}),e.jsxs(i,{children:[e.jsx(t,{primary:"Group Invitations",secondary:"Get notified about new group invitations"}),e.jsx(y,{edge:"end",checked:p.group_invitations,onChange:()=>j("group_invitations")})]})]}),e.jsx(D,{variant:"outlined",sx:{mt:2},onClick:()=>{b("Notification settings saved")},children:"Save Notification Settings"})]})]})]})})]})};export{ue as default};
